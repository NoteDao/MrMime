"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("react"),r=require("three"),t=require("three-stdlib");function n(e){if(e&&e.__esModule)return e;var r=Object.create(null);return e&&Object.keys(e).forEach((function(t){if("default"!==t){var n=Object.getOwnPropertyDescriptor(e,t);Object.defineProperty(r,t,n.get?n:{enumerable:!0,get:function(){return e[t]}})}})),r.default=e,Object.freeze(r)}var a=n(e),o=n(r);function c(e,r){Array.isArray(e)?r.fromArray?r.fromArray(e):r.set(...e):r.copy(e)}exports.Decal=function({debug:e,mesh:r,children:n,position:s,rotation:l,scale:u}){const i=a.useRef(null),[[f,m,p]]=a.useState((()=>[new o.Vector3,new o.Euler,new o.Vector3(1,1,1)]));return a.useLayoutEffect((()=>{const e=(null==r?void 0:r.current)||i.current.parent;if(!(e instanceof o.Mesh))throw new Error('Decal must have a Mesh as parent or specify its "mesh" prop');e&&(c(s,f),c(l,m),c(u,p),i.current.geometry=new t.DecalGeometry(e,f,m,p))}),[r,s,u,l,f,m,p]),a.createElement("mesh",{ref:i},n||a.createElement("meshNormalMaterial",{transparent:!0,depthTest:!0,depthWrite:!1,polygonOffset:!0,polygonOffsetFactor:-4}),e&&a.createElement("mesh",{position:s,rotation:l,scale:u},a.createElement("boxGeometry",null),a.createElement("meshNormalMaterial",{wireframe:!0}),a.createElement("axesHelper",null)))};
